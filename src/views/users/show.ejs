<h2>User Dashboard</h2>
<p><strong>Name:</strong> <%= user.name %></p>
<p><strong>Email:</strong> <%= user.email %></p>
<p><strong>Admin:</strong> <%= user.isAdmin ? 'Yes' : 'No' %></p>

<% if (currentUser && currentUser.isAdmin) { %>
	<form method="post" action="/users/<%= user.id %>/set-admin" style="display:inline">
		<button>Grant admin</button>
	</form>
	<form method="post" action="/users/<%= user.id %>/remove-admin" style="display:inline">
		<button>Remove admin</button>
	</form>
<% } %>

<% if (currentUser && (currentUser.isAdmin || currentUser.id === user.id)) { %>
	<form method="post" action="/users/<%= user.id %>?_method=DELETE" style="margin-top:1rem">
		<button>Delete user</button>
	</form>
<% } %>

<h3>My Projects</h3>
<% if (user.Projects && user.Projects.length > 0) { %>
	<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px;">
		<% user.Projects.forEach(project => { %>
			<div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; background-color: #f9f9f9;">
				<h4><a href="/projects/<%= project.id %>"><%= project.name %></a></h4>
				<p><%= project.description %></p>
				<p><strong>Role:</strong> <%= project.Membership.role %></p>
				<p><strong>Members:</strong> <%= project.Users.length %></p>
				<p><strong>Threads:</strong> <%= (project.Threads || []).length %></p>
				<p><strong>Attachments:</strong> <%= (project.Attachments || []).length %></p>
			</div>
		<% }) %>
	</div>
<% } else { %>
	<p>No projects yet. <a href="/projects/new">Create your first project</a></p>
<% } %>


